mixin renderEvent(event)
    - const [_, tag, text] = event.summary.match(/\[?([^\]]*)\]?\s*(.*)/)

    tr.entry
        td.timeString
            span.timeString #{event.timeString}
        td
            span.tag(class=tag) #{tag}
        td.grow #{text}

// ========

doctype html
head
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    meta(http-equiv='Content-Type' content='text/html; charset=UTF-8')
    link(rel="stylesheet", href="/css/email.css", data-inline)

span.preheader #{diff.added.length} √∫j, #{diff.removed.length} t√∂r√∂lt bejegyz√©s |

table.body(role='presentation' border='0' cellpadding='0' cellspacing='0')
    tr
        td &nbsp;
        td.container
            .content
                // START CENTERED WHITE CONTAINER
                table.main(role='presentation')
                    // START MAIN CONTENT AREA
                    tr
                        td.wrapper
                            table(role='presentation' border='0' cellpadding='0' cellspacing='0')
                                tr
                                    td

                                        p Kedves #{name}!
                                        p V√°ltoz√°sok t√∂rt√©ntek a #[a(href='https://meditime.today/') Meditime] beoszt√°sodban:

                                        table.entries(role='presentation' border='0' cellpadding='0' cellspacing='0')
                                            if diff.removed.length
                                                tr
                                                    td(colspan='3')
                                                        h3 T√∂r√∂lt bejegyz√©s#{diff.removed.length > 1 ? 'ek' : ''}

                                                each event in diff.removed
                                                    +renderEvent(event)

                                            if diff.added.length
                                                tr
                                                    td(colspan='3')
                                                        h3 √öj bejegyz√©s#{diff.added.length > 1 ? 'ek' : ''}

                                            each event in diff.added
                                                +renderEvent(event)

                                        hr

                                        p.calendar
                                            a(href=`https://calendar.google.com/calendar/r?cid=${calendarId}`)
                                                span.calendarIcon üìÖ
                                                span.addCalendar Napt√°r hozz√°ad√°sa
                                            br
                                            small
                                                | Azonos√≠t√≥:
                                                |
                                                a(href=`mailto:${calendarId}`) #{calendarId}

                    // END MAIN CONTENT AREA
                // END CENTERED WHITE CONTAINER
                // START FOOTER
                .footer
                    table(role='presentation' border='0' cellpadding='0' cellspacing='0')
                        tr
                            td.content-block
                                p.justify
                                    | A Meditime √≥r√°nk√©nt van ellen≈ërizve, a szem√©lyre sz√≥l√≥ napt√°rad is ezzel egyid≈ëben automatikusan friss√ºl.
                                    | V√°laszlev√©lben jelezd, ha k√©r√©sed, k√©rd√©sed, vagy b√°rmilyen megjegyz√©sed van, illetve ha nem szeretn√©l t√∂bb ilyen √©rtes√≠t√©st kapni.
                                    | Az adatok t√°j√©koztat√≥ jelleg≈±ek, a helyess√©g√ºk√©rt vagy teljess√©g√ºk√©rt felel≈ëss√©get senki nem v√°llal.
                        tr
                            td.content-block.powered-by
                                | Meditime √ârtes√≠t≈ë - v#{process.env.npm_package_version}
                // END FOOTER
